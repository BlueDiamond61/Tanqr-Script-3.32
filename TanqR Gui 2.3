local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "TanqrScriptGUI"
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local Aimlock = Instance.new("Frame")
Aimlock.Name = "Aimlock"
Aimlock.Parent = ScreenGui
Aimlock.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Aimlock.BackgroundTransparency = 0.2
Aimlock.BorderSizePixel = 0
Aimlock.Position = UDim2.new(0.034, 0, 0.064, 0)
Aimlock.Size = UDim2.new(0, 368, 0, 263)
Aimlock.Active = true
Aimlock.Draggable = true
Aimlock.Selectable = true

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 8)
UICorner.Parent = Aimlock

local TANQRSCRIPT = Instance.new("TextLabel")
TANQRSCRIPT.Name = "TANQR SCRIPT"
TANQRSCRIPT.Parent = Aimlock
TANQRSCRIPT.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
TANQRSCRIPT.BorderSizePixel = 0
TANQRSCRIPT.Position = UDim2.new(0, 0, 0, 0)
TANQRSCRIPT.Size = UDim2.new(1, 0, 0, 50)
TANQRSCRIPT.Font = Enum.Font.Bangers
TANQRSCRIPT.Text = "Tanqr Script"
TANQRSCRIPT.TextColor3 = Color3.fromRGB(85, 255, 255)
TANQRSCRIPT.TextScaled = true
TANQRSCRIPT.TextSize = 14
TANQRSCRIPT.TextWrapped = true

local TANQRAIM = Instance.new("TextButton")
TANQRAIM.Name = "TANQR AIM"
TANQRAIM.Parent = Aimlock
TANQRAIM.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
TANQRAIM.BorderSizePixel = 0
TANQRAIM.Position = UDim2.new(0.022, 0, 0.28, 0)
TANQRAIM.Size = UDim2.new(0.44, 0, 0.175, 0)
TANQRAIM.Font = Enum.Font.Bangers
TANQRAIM.Text = "Tanqr Aim"
TANQRAIM.TextColor3 = Color3.fromRGB(85, 255, 255)
TANQRAIM.TextScaled = true
TANQRAIM.TextSize = 14
TANQRAIM.TextWrapped = true

local PurpleTeam = Instance.new("TextButton")
PurpleTeam.Name = "Purple Team"
PurpleTeam.Parent = Aimlock
PurpleTeam.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
PurpleTeam.BorderSizePixel = 0
PurpleTeam.Position = UDim2.new(0.55, 0, 0.28, 0)
PurpleTeam.Size = UDim2.new(0.44, 0, 0.175, 0)
PurpleTeam.Font = Enum.Font.Bangers
PurpleTeam.Text = "Purple Team"
PurpleTeam.TextColor3 = Color3.fromRGB(85, 255, 255)
PurpleTeam.TextScaled = true
PurpleTeam.TextSize = 14
PurpleTeam.TextWrapped = true

local ImageLabel = Instance.new("ImageLabel")
ImageLabel.Parent = Aimlock
ImageLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ImageLabel.BackgroundTransparency = 1
ImageLabel.Position = UDim2.new(0.399, 0, 0.525, 0)
ImageLabel.Size = UDim2.new(0.2, 0, 0.228, 0)
ImageLabel.Image = "http://www.roblox.com/asset/?id=4761224815"

local TextLabel = Instance.new("TextLabel")
TextLabel.Parent = Aimlock
TextLabel.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
TextLabel.BorderSizePixel = 0
TextLabel.Position = UDim2.new(0, 0, 0.808, 0)
TextLabel.Size = UDim2.new(1, 0, 0.19, 0)
TextLabel.Font = Enum.Font.Bangers
TextLabel.Text = "Made BY Zyrxek ON YT"
TextLabel.TextColor3 = Color3.fromRGB(85, 255, 255)
TextLabel.TextScaled = true
TextLabel.TextSize = 14
TextLabel.TextWrapped = true

local aimlockEnabled = false
local hitboxConnection

local function createHitboxes()
    if hitboxConnection then
        hitboxConnection:Disconnect()
    end
    
    hitboxConnection = RunService.Heartbeat:Connect(function()
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character then
                local character = player.Character
                local hitboxParts = {
                    character:FindFirstChild("RightUpperLeg"),
                    character:FindFirstChild("LeftUpperLeg"),
                    character:FindFirstChild("HeadHB"),
                    character:FindFirstChild("HumanoidRootPart")
                }
                
                for _, part in pairs(hitboxParts) do
                    if part then
                        part.CanCollide = false
                        part.Transparency = 0.8
                        part.Size = Vector3.new(13, 13, 13)
                        
                        local highlight = part:FindFirstChild("HitboxHighlight") or Instance.new("Highlight")
                        highlight.Name = "HitboxHighlight"
                        highlight.FillColor = Color3.fromRGB(255, 0, 0)
                        highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
                        highlight.Parent = part
                    end
                end
            end
        end
    end)
end

local function removeHitboxes()
    if hitboxConnection then
        hitboxConnection:Disconnect()
        hitboxConnection = nil
    end
    
    for _, player in pairs(Players:GetPlayers()) do
        if player.Character then
            local character = player.Character
            local parts = {
                character:FindFirstChild("RightUpperLeg"),
                character:FindFirstChild("LeftUpperLeg"),
                character:FindFirstChild("HeadHB"),
                character:FindFirstChild("HumanoidRootPart")
            }
            
            for _, part in pairs(parts) do
                if part then
                    part.CanCollide = true
                    part.Transparency = 0
                    part.Size = Vector3.new(2, 2, 1)
                    
                    local highlight = part:FindFirstChild("HitboxHighlight")
                    if highlight then
                        highlight:Destroy()
                    end
                end
            end
        end
    end
end

TANQRAIM.MouseButton1Click:Connect(function()
    aimlockEnabled = not aimlockEnabled
    
    if aimlockEnabled then
        TANQRAIM.BackgroundColor3 = Color3.fromRGB(0, 100, 0)
        TANQRAIM.Text = "Aimlock ON"
        createHitboxes()
    else
        TANQRAIM.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        TANQRAIM.Text = "Tanqr Aim"
        removeHitboxes()
    end
end)

PurpleTeam.MouseButton1Click:Connect(function()
    local success, result = pcall(function()
        return loadstring(game:HttpGet('https://pastebin.com/raw/pyzjWNhk', true))()
    end)
    
    if not success then
        warn("Failed to load Purple Team script: " .. tostring(result))
    end
end)

local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Parent = Aimlock
closeButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
closeButton.BorderSizePixel = 0
closeButton.Position = UDim2.new(0.95, 0, 0.02, 0)
closeButton.Size = UDim2.new(0.04, 0, 0.08, 0)
closeButton.Font = Enum.Font.SourceSansBold
closeButton.Text = "X"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.TextScaled = true

closeButton.MouseButton1Click:Connect(function()
    removeHitboxes()
    ScreenGui:Destroy()
end)

Players.PlayerRemoving:Connect(function(player)
    if player == LocalPlayer then
        removeHitboxes()
    end
end)
